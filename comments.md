---
layout: page
title: コメントの書き方
---

# コメントとは何ですか？
* コメントは，コードの中にある文です．
* コメントはコンパイルされず，プログラムの動作に影響を与えません．
* コードだけでは分かりにくい部分を補足説明し，コードを理解しやすくするためにコメントが付けられています．
* コードを他の人と共有したり，プログラムを書いた後で確認したりするときに役に立ちます．


# フォーマット
* C言語では，2つの方法でコメントを書くことができます．
* 1番目は「//」を使用することです．
   * 「//」以降，行末まではコメントになります．
* 2番目は「/\*」と「\*/」です．
   * 「/\*」と「\*/」の間のコードは，複数行が含まれている場合でもコメントになります．

```
int main(){
  int i, x; // コードの後ろに書くこともできます．

  // コードの先頭に書くこともできます．
  // 複数行。。。
  for(i=0; i<10; i++){
    ...; // ループの中もOK．
  }
  
  /* この書き方だと，一行でも */
  /*
   * 複数行でも
   * OK．
   */
}
```


# 良いコメントを書く方法は？
* コメントの目的は，プログラムを理解しやすくすることです．
* 理解しにくいコードの部分にコメントを入れるべきです．
* コメントは，コードの要約や意図を記述しているべきです．
  * 要約：１ブロックの処理をまとめて説明（何をしているのか？）
  * 意図：変数の用途，if文条件の説明，分かりにくい計算式や手順に関する補足説明，etc.（なぜしているのか？）

~~~
// xに10を割り当てる
int x = 10;
~~~

* これは良いコメントではありません．コードが何をしているのかは明らかであり，コメントは何の説明もしていません．

~~~
// 配列の要素数を保存する
int x = 10;
~~~

* これは良いコメントです．xの値と，xと10が何を表しているかを説明します．
* これと同様に，各変数を使う意図を説明するコメントを書くことをお勧めします．（用途が自明な変数名を付けている場合などは，コメントは書かなくてもよいです．）
* これにより，各変数が何を表しているかを簡単に識別できます．

* 「要約」に関しては，各行ではなく，コードの大きなセクションの前にコメントを追加することをお勧めします．

~~~
// forは配列内のすべてのセルを通過します
for(i=0; i<10; i++) {
	// iが0の場合、フィボナッチ値は1です
	if(i==0) fibonacci[i] = 1;
	// iが1の場合、フィボナッチ値は1です
	else if(i==1) fibonacci[i] = 1;
	// iが0または1ではない場合、フィボナッチ値は前の2つの値の合計です
	else fibonacci[i] = fibonacci[i-1] + fibonacci[i-2];
}
~~~

* コメントは悪くはありませんが，プログラムのコードの色々の場所に散らかっています．

~~~
// 配列を反復処理して，フィボナッチ数列を入力します
for(i=0; i<10; i++) {
	if(i==0) fibonacci[i] = 1;
	else if(i==1) fibonacci[i] = 1;
	else fibonacci[i] = fibonacci[i-1] + fibonacci[i-2];
}
~~~

* このコメントには，必要なすべての説明が要約されているため，より適切です．

* 例えばp1-2のコードでは，以下のような

```
#include <stdio.h>

int main(){
  int i;
  int x; // 入力する変数

  // x_{1}の入力
  scnaf("%d", &x);

  // x_{1}が範囲外であれば，エラー表示して終了
  if( !(...<=x && x<=... ) ){
    printf("Error\n");
    return 0;
  }
  
  // x_{i} (i=1, ...)を計算して出力する
  for(i=1; i<=...; i++){
    // x_{i}を出力してから，x_{i+1}の計算
    printf("%d\n", x);
    if( x == 1 ) break;
    
    // x_{i+1}を計算
    if( ... ) x /= 2; // x_{i}が偶数の場合
    else x = 3*x+1; // x_{i}が奇数の場合
  }

  // iが100以下で1にたどり着いていればOK
  if( ... ) printf("OK\n");
  
  return 0;
}
```


# コメントアウト
* 一時的なテストコード，書きかけのコード，後で使うかもしれないコードを残しておくために，`//`か`/* */`を使ってコードを無効化しておくことを，コメントアウトと呼びます．
* デバッグだけでなく，プログラム高速化，仕様変更などの際に使える，実践的な手法です．

```
...
for(i=1; i<=100; i++){
  printf("%d\n", x);
  if( x == 1 ) break;
  
  if( isEven(x) ){
    ...
  }
  /*
  if( x%2 == 0 ) x /= 2;
  else x = 4*x+1;
  */
}
```
