---
layout: page
title: 2-2. 交換ソート【1, 2週目のみ採点】
---


ここでは，<font color="red">交換に基づくソート</font>の基本である<font color="red">バブルソート (bubble sort)</font>を実装してみよう．

バブルソートの基本操作は，<font color="red">隣り合う二つの要素のみに着目し，それを昇順に並べ替える操作を繰り返す</font>こと，である．
面白い性質として，配列全体がソートされているかといったことは一切気にせずに，隣り合う二つの要素を並び替えれば，配列全体もソートされるように工夫されたアルゴリズムである．


処理の概要は以下の通りである．

- 0, 比較終了位置を配列の最後の要素にセットする．
- 1, 配列の先頭から，隣り合う要素を比較
- 2, 昇順でなければ入れ替える．昇順であれば何もしない．
- 3, 一つ後ろに移動する．
- 4, 比較終了位置に到達するまで上記2,3の操作を繰り返す．
	- 配列の最後まで到達したら，次の比較終了位置を現在の終了位置から一つ先頭に移動し，1に戻る，
	- もしも，比較終了位置が配列の先頭まできたら，操作終了．

バブルソートの名前の由来は，上記の手続をすると，最も大きい要素がどんどん右側に移動しいき，水中の泡が上に昇っていく様に似ていることから命名されたと言われている．

![Bubble Sort](https://i.imgur.com/fXu9zgd.png)

---
## 問題
---

与えられた配列データを<font color="red">バブルソート</font>により<font color="red">昇順</font>に並べ替えるプログラムを作成せよ．

---
### 仕様
---

- 課題2-0に記載の仕様全て

- 配列操作に利用可能な関数
  - 配列内の二つの要素を入れ替える手続きとして`func_swap_`関数を用いること．
  - 配列内の二つの要素を比較する手続きとして`comp_`関数を用いること．
  - 配列内の要素を表示する手続きとして`print_array_`関数を用いること．

- 配列を選択ソートによって並び替える `bub_sort` 関数を作成すること．また，以下の仕様を満すこと．
  - 配列の要素を並び替える操作は全てこの関数内で行うこと．
    - ただし，この関数内で呼ばれる別の関数を作成してもよい．その際は必ず前方宣言すること．
  - 入力データ用に動的に確保した配列と入力データの個数の二つを引数とすること．
    - 例：
    ```
    int bub_sort(int *array, int N) ...
    ```
  - 要素間の比較`comp_`の呼び出し回数を`bub_sort` 関数の戻り値とすること．
  - 要素の値が同じ場合など，入れ替える必要がない場合は入れ替えてはいけない．

- 表示
  - `func_swap_`により値を入れ替えるたびに，入れ替えた要素の場所と配列全体の要素を以下の書式で表示すること
    - 交換した2つの要素番号$i,j(i<j)$を用いて SWAP$(i,j)$ と表示し，空白後に交換後の配列の全要素を表示する．ただし，交換が実行されなかった場合は何も表示してはいけない．
  	- 例：要素番号 0,12の要素を交換した場合
    ```
    SWAP(⊔0,12)⊔⊔6⊔⊔2⊔⊔8⊔⊔4⊔11⊔⊔9⊔12⊔⊔5⊔⊔3⊔13⊔⊔1⊔⊔7⊔10↩︎
    ```
    - 全体的な出力例は実行例を参照のこと．

- 題2-0に提示してある関数を`ppa_extra_h/p2_header.h`というファイルにおいてある．`#include "ppa_extra_h/p2_header.h"`という宣言を通して含めたら、こちらの関数を書かなくても呼べる：`func_swap_`、`comp_`、`print_array_`、`func_mallocation_`

- 以下のプログラムを必ず用いてプログラムを完成せること．

```
#include <stdio.h>
#include <stdlib.h>
#include “ppa_extra_h/p2_header.h”

int bub_sort(int *, int);

int main() {

  ...(省略)...

  return 0;               //
}

int bub_sort(int *array, int N) {

  ...(省略)...

}
```


---
## 実行例
---
---
### 実行例(1)
---
- 入力データ
```
7 2 1 3 7 4 6 5
```
- 出力例
```
INIT:::::::  2  1  3  7  4  6  5
SWAP( 0, 1)  1  2  3  7  4  6  5
SWAP( 3, 4)  1  2  3  4  7  6  5
SWAP( 4, 5)  1  2  3  4  6  7  5
SWAP( 5, 6)  1  2  3  4  6  5  7
SWAP( 4, 5)  1  2  3  4  5  6  7
DONE:::::::  1  2  3  4  5  6  7
21
```


---
### 実行例(2)
---
- 入力データ
```
13 10 2 8 4 11 9 11 5 3 13 1 2 6
```
- 出力例
```
INIT::::::: 10  2  8  4 11  9 11  5  3 13  1  2  6
SWAP( 0, 1)  2 10  8  4 11  9 11  5  3 13  1  2  6
SWAP( 1, 2)  2  8 10  4 11  9 11  5  3 13  1  2  6
SWAP( 2, 3)  2  8  4 10 11  9 11  5  3 13  1  2  6
SWAP( 4, 5)  2  8  4 10  9 11 11  5  3 13  1  2  6
SWAP( 6, 7)  2  8  4 10  9 11  5 11  3 13  1  2  6
SWAP( 7, 8)  2  8  4 10  9 11  5  3 11 13  1  2  6
SWAP( 9,10)  2  8  4 10  9 11  5  3 11  1 13  2  6
SWAP(10,11)  2  8  4 10  9 11  5  3 11  1  2 13  6
SWAP(11,12)  2  8  4 10  9 11  5  3 11  1  2  6 13
SWAP( 1, 2)  2  4  8 10  9 11  5  3 11  1  2  6 13
SWAP( 3, 4)  2  4  8  9 10 11  5  3 11  1  2  6 13
SWAP( 5, 6)  2  4  8  9 10  5 11  3 11  1  2  6 13
SWAP( 6, 7)  2  4  8  9 10  5  3 11 11  1  2  6 13
SWAP( 8, 9)  2  4  8  9 10  5  3 11  1 11  2  6 13
SWAP( 9,10)  2  4  8  9 10  5  3 11  1  2 11  6 13
SWAP(10,11)  2  4  8  9 10  5  3 11  1  2  6 11 13
SWAP( 4, 5)  2  4  8  9  5 10  3 11  1  2  6 11 13
SWAP( 5, 6)  2  4  8  9  5  3 10 11  1  2  6 11 13
SWAP( 7, 8)  2  4  8  9  5  3 10  1 11  2  6 11 13
SWAP( 8, 9)  2  4  8  9  5  3 10  1  2 11  6 11 13
SWAP( 9,10)  2  4  8  9  5  3 10  1  2  6 11 11 13
SWAP( 3, 4)  2  4  8  5  9  3 10  1  2  6 11 11 13
SWAP( 4, 5)  2  4  8  5  3  9 10  1  2  6 11 11 13
SWAP( 6, 7)  2  4  8  5  3  9  1 10  2  6 11 11 13
SWAP( 7, 8)  2  4  8  5  3  9  1  2 10  6 11 11 13
SWAP( 8, 9)  2  4  8  5  3  9  1  2  6 10 11 11 13
SWAP( 2, 3)  2  4  5  8  3  9  1  2  6 10 11 11 13
SWAP( 3, 4)  2  4  5  3  8  9  1  2  6 10 11 11 13
SWAP( 5, 6)  2  4  5  3  8  1  9  2  6 10 11 11 13
SWAP( 6, 7)  2  4  5  3  8  1  2  9  6 10 11 11 13
SWAP( 7, 8)  2  4  5  3  8  1  2  6  9 10 11 11 13
SWAP( 2, 3)  2  4  3  5  8  1  2  6  9 10 11 11 13
SWAP( 4, 5)  2  4  3  5  1  8  2  6  9 10 11 11 13
SWAP( 5, 6)  2  4  3  5  1  2  8  6  9 10 11 11 13
SWAP( 6, 7)  2  4  3  5  1  2  6  8  9 10 11 11 13
SWAP( 1, 2)  2  3  4  5  1  2  6  8  9 10 11 11 13
SWAP( 3, 4)  2  3  4  1  5  2  6  8  9 10 11 11 13
SWAP( 4, 5)  2  3  4  1  2  5  6  8  9 10 11 11 13
SWAP( 2, 3)  2  3  1  4  2  5  6  8  9 10 11 11 13
SWAP( 3, 4)  2  3  1  2  4  5  6  8  9 10 11 11 13
SWAP( 1, 2)  2  1  3  2  4  5  6  8  9 10 11 11 13
SWAP( 2, 3)  2  1  2  3  4  5  6  8  9 10 11 11 13
SWAP( 0, 1)  1  2  2  3  4  5  6  8  9 10 11 11 13
DONE:::::::  1  2  2  3  4  5  6  8  9 10 11 11 13
78
```


---
### 実行例(3)
---
- 入力データ
```
7 2 1 1 2 3 1 2
```
- 出力例
```
INIT:::::::  2  1  1  2  3  1  2
SWAP( 0, 1)  1  2  1  2  3  1  2
SWAP( 1, 2)  1  1  2  2  3  1  2
SWAP( 4, 5)  1  1  2  2  1  3  2
SWAP( 5, 6)  1  1  2  2  1  2  3
SWAP( 3, 4)  1  1  2  1  2  2  3
SWAP( 2, 3)  1  1  1  2  2  2  3
DONE:::::::  1  1  1  2  2  2  3
21
```
