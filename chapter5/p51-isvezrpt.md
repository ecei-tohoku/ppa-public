---
layout: page
title: 5-1. 選択ソート【初歩】
---


この問題では，もっともシンプルなソートアルゴリズムのひとつである <font color="red">選択ソート (selection sort)</font> を実装する．

まず，ソートには昇順（小さい方から大きい方へ）と降順（大きい方から小さい方へ）の通常二パターンが考えられるが，本課題では，簡単のため<font color="red">昇順</font>の場合のみを考える．以降，断りなく単に「ソート」と記載があった場合には，昇順ソートのこととする．

選択ソートの基本操作は，「<font color="red">ソートされていない要素</font>から最も小さい値を見つけ出す」である．
また，見つけた最小値を取り除き，同じ手順を行えば，2番目に小さい値，3番目に小さい値，と順番に抽出することができる．
よって，その時点での最小値を取得したら，それを，配列の先頭から並べていけばソートが完成する．という仕組みである．
直感的にもわかりやすいアルゴリズムと言える．

しかし，これを実際にプログラムで実装するためには，いろいろ考えることがある．
もうすこし具体的な処理手順としては以下のようになる．

1. 配列全体から，もっとも値の小さいデータを探し，配列の先頭(1番目)の要素と交換する．
2. 1番目の要素を除き，配列の<font color="red">残りのデータ</font>の中から，もっとも値の小さいデータ（全体で2番目に値の小さいデータ）を探し，配列の先頭から2番の要素と交換する．
3. 1,2番目の要素を除き，配列の<font color="red">残りのデータ</font>の中から，もっとも値の小さいデータ（全体で3番目に値の小さいデータ）を探し，配列の手前から3番目の要素と交換する．
4. 以下同様

次の図は、最初のステップで、もっとも値の小さいデータ (1) を見つけて、配列xの最初の先頭と交換する方法を示している.

![Select Sort](https://i.imgur.com/4amLHf9.png)

次の図は、アルゴリズムの各反復i後の配列xの状態を示している. 各反復に必要な比較の数に特に注意.

![Select Sort](https://i.imgur.com/ZurtE8b.png)

---
## 問題
---
与えられた配列データを<font color="red">選択ソート</font>により<font color="red">昇順</font>に並べ替えるプログラムを作成せよ．
なお入力データは，1列目が配列の要素数，2列目以降が配列の要素であるとする．
- 入力データの例
  ```
  5 1 2 3 4 5
  ```

---
### 仕様
---
- `#include` していいのは `<stdio.h>`のみとする．

- 関数は全て前方宣言すること．前方宣言とは，その関数が使われる前に宣言しておくことを指し，この問題では`main`関数の前に他の関数を宣言する．

- グローバル変数や静的変数を使用しないこと．

- 可変長配列を用いて配列を確保すること．以下の例のように可変長配列のサイズが実行時に設定できる．
  ```
  int main(){
    int n;              // 配列の要素数
    scanf("%d", &n);    // nを標準入力
    int data[n];        // 可変長配列を宣言
        
    ...
    return 0;
  }
  ```

- 比較回数を数える時に以下のように比較するたびにカウンタをインクリメントする．<font color="red">カウンタを条件分岐の中に入れないこと．</font>
  ```
  comp++;                     //カウンタ
  if( データ１ 比較 データ２ ) {   //比較演算
    ...
  }
  ```

- 説明では”空白”を`⊔`と”改行”を`↩︎`で表す．

- <font color="red">各ステップに該当する詳細な仕様はそのステップ内に書かれており，それらを全て考慮する．
  標準出力を行うときに，空白と改行に関する細かい仕様を必ず守る．</font>


---
### ステップに分けてプログラミング
---
この問題では，「配列全体から最小値を検索し，それを左に移動させる」「残りの配列データに対して最小値探索を繰り返す」「関数を用いて選択ソートを作成する」の3ステップに分けてプログラミングしてもらう．ステップごとに"動作確認"に成功しなければ，"TAに提出"が出来ないようになっている．以下では，各ステップをさらに細分化して説明する．
なお，ステップ1/3と2/3では処理を`main` 関数内で実装する．

---
### ステップ1/3　「配列全体から最小値を検索し，それを左に移動させる」
---
ここでは，配列全体から最小値を検索し，配列の先頭の要素と入れ替える部分を実装する.

#### 手順 
- 1-1. これまでの問題と同様に，まず，確実に必要と思われるC言語のメインの構造を作る．

- 1-2. 入力データを標準入力から読み込むのではなく，まずはデータがすでに入っている固定長配列を`main` 関数内で用意する．
  例えば,
  ```
  int data[6] = {4,6,10,11,3,8};
  ```

- 1-3. 2つの要素を入れ替える部分を実装する．配列の0番目と1番目の要素を入れ替え，結果を標準出力して（自動採点システムではなく）目視で確認する．

- 1-4. 配列全体の最小値を見つけ，配列の先頭と最小値の位置を交換する．その時に”問題2-1(最小値検索【初歩】)”を参考にしてもよい.

- 1-5. 結果を標準出力して目視で確認する．

- 1-6. 固定長配列を可変長配列に変更する．そのためまず配列の長さ（データの数）を標準入力から受け取る．
  その長さと同じ長さの可変長配列を宣言する．データを標準入力から受け取るようにコードを変更する．自動採点システムに用意したテストケースでは，配列の要素数がテストケースごとに異なる．
  このため，配列の要素数をテストケースごと実行時に変更する必要がある．

#### 出力に関する仕様
- `main` 関数内で標準出力を行う．出力に関しては, 問題2-1(2-1. 最小値検索【初歩】)の`print_array`関数を参考にせよ．
  - 配列の各要素の出力は4桁とし, 各最後の要素以外の各要素の出力後空白を加える．
  - 配列の最後の要素の出力後はカンマも空白も加えず改行する．（問題2-1と出力仕様が異なるので注意せよ）.
  - 配列の出力の例は以下に示す．
    ```
	⊔⊔⊔6,⊔⊔⊔⊔2,⊔⊔⊔11,⊔⊔⊔⊔9,⊔⊔⊔12,⊔⊔⊔13,⊔⊔⊔⊔1,⊔⊔⊔10↩︎
    ```
  - 入力配列と出力配列は上記の形式で出力する．
  - 比較を行うたびに，比較回数`comp`と最小値`min`を以下の形式で出力する．
    ```　
	comp⊔=⊔10,⊔min⊔=⊔1↩︎
    ```
- 実行例：入力データ　8 3 19 8 16 5 11 2 17　の場合以下のようになる．（ここで最初の値はデータ数を表す）．
    ```
    ⊔⊔⊔3,⊔⊔⊔19,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔⊔2,⊔⊔⊔17↩︎
    comp⊔=⊔1,⊔min⊔=⊔3↩︎
    comp⊔=⊔2,⊔min⊔=⊔3↩︎
    comp⊔=⊔3,⊔min⊔=⊔3↩︎
    comp⊔=⊔4,⊔min⊔=⊔3↩︎
    comp⊔=⊔5,⊔min⊔=⊔3↩︎
    comp⊔=⊔6,⊔min⊔=⊔2↩︎
    comp⊔=⊔7,⊔min⊔=⊔2↩︎
    ⊔⊔⊔2,⊔⊔⊔19,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔⊔3,⊔⊔⊔17↩︎
    ```


---
### ステップ2/3　「残りの配列データに対して最小値探索を繰り返す」
---
ここでは，ステップ1/3の最小値の検索を，残りの配列データに対して行う部分を実装する．

#### 手順

- 2-1. ステップ1/3における比較を行うたびに出力する部分（`comp⊔=⊔10,⊔min⊔=⊔1↩︎`）は使用しないので，削除する．

- 2-2. 配列の先頭を除いた残りの配列データの最小値を検索する．その最小値と残りの配列の先頭のデータを交換する．
．
- 2-3. そのように全てのデータに対する最小値検索を行う．最小値検索処理をループを使って書く．（ソート全体は２重ループでかける）．

- 2-4. ソート処理全体の比較回数を数え，最後に標準出力する．出力の仕方は以下の通りである．
    ```
    comp⊔=⊔28↩︎
    ```

#### 出力の仕様
- 実行例：入力データ　8 3 19 8 16 5 11 2 17　の場合, 以下のようになる．（ここで最初の値はデータ数を表す）．
    ```
    ⊔⊔⊔3,⊔⊔⊔19,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔⊔2,⊔⊔⊔17↩︎
    ⊔⊔⊔2,⊔⊔⊔19,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔⊔3,⊔⊔⊔17↩︎
    ⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔19,⊔⊔⊔17↩︎
    ⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔16,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔19,⊔⊔⊔17↩︎
    ⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔11,⊔⊔⊔19,⊔⊔⊔17↩︎
    ⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔16,⊔⊔⊔19,⊔⊔⊔17↩︎
    ⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔16,⊔⊔⊔19,⊔⊔⊔17↩︎
    ⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔16,⊔⊔⊔17,⊔⊔⊔19↩︎
    comp⊔=⊔28↩︎
    ```


---
### ステップ3/3　「関数を用いて選択ソートを作成する」
---
ここでは，これまでに実装した部分のいくつかを関数化し，仕様を満たすようにプログラムを作成する．

#### 手順 

- 3-1. `print_array` 関数を作成し，配列データを標準出力する部分は, この関数の中に入れる，この関数の引数`size`は配列内のデータ数である．
  ```
    void print_array(int array[], int size)
  ```

- 3-2. 2つの要素を入れ替える`swap` 関数を作成し，前のステップの2つの値を交換する部分を, この関数内に入れる．この関数の引数`x`と`y`は交換するデータの配列内のインデックスである．
  ```
    void swap(int array[], int x, int y) 
  ```

- 3-3. 配列を選択ソートによって並べ替える `sel_sort` 関数を作成する．ステップ2/3で作成した最小値探索を行う部分を, この関数内に移動する．
  この関数の引数`size`は配列内のデータ数である．
  ```
    void sel_sort(int array[], int size)
  ```
  `sel_sort` 関数の中で，ソート処理が終わってから比較回数も標準出力する．出力の仕方はステップ2/3の2-4と同じである．

- 3-4 配列のデータの出力，２つの値の交換と選択ソートに関しては, このステップで定義した関数を必ず使用する．

#### 出力の仕様
- ここで，`print_array`関数の出力は，ステップ1/3と同じであり，以下に例を示す．
  データの個数が8でデータは6 2 11 9 12 13 1 10 の場合の出力
  ```
    ⊔⊔⊔6,⊔⊔⊔⊔2,⊔⊔⊔11,⊔⊔⊔⊔9,⊔⊔⊔12,⊔⊔⊔13,⊔⊔⊔⊔1,⊔⊔⊔10↩︎
  ```

- 配列を入力後，INIT. ARRAY : と表示し，その後入力した配列を`print_array` 関数を用いて出力すること
    ```
    INIT.⊔ARRAY⊔:⊔⊔⊔⊔6,⊔⊔⊔⊔2,⊔⊔⊔11,⊔⊔⊔⊔9,⊔⊔⊔12,⊔⊔⊔13,⊔⊔⊔⊔1,⊔⊔⊔10↩︎
    ```

- 配列の$i$番目の要素と最小値の$j$番目要素を交換する場合， SWAP$(i,j)$ : と表示後に，交換後の配列の全要素を`print_array` 関数を用いて表示する．
    SWAP$(i,j)$の$i$と$j$は2桁で表示する．交換が起こらなかった場合は，SWAP$(i,i)$を表示する．
  - 例1：要素番号0,6の要素を交換した場合
    ```
    SWAP(⊔0,⊔6)⊔:⊔⊔⊔⊔1,⊔⊔⊔⊔2,⊔⊔⊔11,⊔⊔⊔⊔9,⊔⊔⊔12,⊔⊔⊔13,⊔⊔⊔⊔6,⊔⊔⊔10↩︎
    ```
  - 例2：$i=0$の時に交換が起こらなかった場合
    ```
    SWAP(⊔0,⊔0)⊔:⊔⊔⊔⊔1,⊔⊔⊔⊔1,⊔⊔⊔⊔1,⊔⊔⊔⊔1,⊔⊔⊔⊔1,⊔⊔⊔⊔1,⊔⊔⊔⊔1,⊔⊔⊔⊔1↩︎
    ```

- 配列の並べ替えが完了したら，comp = と表示し，比較回数を表示して改行せよ．
    ```
    comp⊔=⊔28↩︎
    ```
    
- 実行例：入力データ　8 3 19 8 16 5 11 2 17　の場合以下のようになる．（ここで最初の値はデータ数を表す）．
  ```
  INIT.⊔ARRAY⊔:⊔⊔⊔⊔3,⊔⊔⊔19,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔⊔2,⊔⊔⊔17↩︎
  SWAP(⊔0,⊔6)⊔:⊔⊔⊔⊔2,⊔⊔⊔19,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔⊔3,⊔⊔⊔17↩︎
  SWAP(⊔1,⊔6)⊔:⊔⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔⊔5,⊔⊔⊔11,⊔⊔⊔19,⊔⊔⊔17↩︎
  SWAP(⊔2,⊔4)⊔:⊔⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔16,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔19,⊔⊔⊔17↩︎
  SWAP(⊔3,⊔4)⊔:⊔⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔16,⊔⊔⊔11,⊔⊔⊔19,⊔⊔⊔17↩︎
  SWAP(⊔4,⊔5)⊔:⊔⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔16,⊔⊔⊔19,⊔⊔⊔17↩︎
  SWAP(⊔5,⊔5)⊔:⊔⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔16,⊔⊔⊔19,⊔⊔⊔17↩︎
  SWAP(⊔6,⊔7)⊔:⊔⊔⊔⊔2,⊔⊔⊔⊔3,⊔⊔⊔⊔5,⊔⊔⊔⊔8,⊔⊔⊔11,⊔⊔⊔16,⊔⊔⊔17,⊔⊔⊔19↩︎
  comp⊔=⊔28↩︎
  ```

