---
layout: page
title: 1-2. コラッツの問題【10点，２週目のみ採点】
---

好きな正整数に対して，「偶数なら2で割り，奇数なら3倍して1加える」という操作を繰り返すと最後には$1$に到達することが経験的に知られている．たとえば$3$からはじめてこの操作を繰り返すと$3\to 10\to 5\to 16\to 8\to 4\to 2\to 1$というステップを経て$1$に到達する．
今のところ反例（$1$に到達しない正整数）は見つかっていないが，任意の正整数に対して上の主張が成り立つかどうかについては未解決問題である．[コラッツの問題](https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%A9%E3%83%83%E3%83%84%E3%81%AE%E5%95%8F%E9%A1%8C)，角谷の問題，3n+1問題などと呼ばれる．
ここでは実際に正整数を受け取って$1$に到達するまで上の操作を自動的に繰り返すプログラムを作成しよう．

## 問題

標準入力から正整数$x_1$を読み込み，以下の漸化式にしたがって$x_2, x_3, ...$を順に求めて標準出力に書き出し，$x_i = 1$となったら反復を終了するプログラムを作成せよ．

$$
x_{i+1} = \begin{cases}
    x_{i} / 2 & \text{（$x_i$が偶数のとき）} \\
    3x_{i} + 1 & \text{（$x_i$が奇数のとき）}
    \end{cases}
$$

ただし，入力される正整数$x_1$は$2 \leq x_1 \leq 100000$を満たすと仮定してよい．
プログラムは以下の仕様を満たすこと．

1. $x_i$（$i = 1, 2, ...$）の値を1行ずつ表示せよ．入力された値（$x_1$）を表示し忘れないように留意せよ．
1. $x_i = 1$になった時は，その計算結果`1`を表示したのち，`OK`と表示してプログラムを終了せよ．
1. $x_{100}$まで計算しても値が$1$にならない場合は，$x_{100}$の値を表示したのち，そのままプログラムを終了せよ．このときは`OK`と表示しないこと．
1. 各表示は標準出力に出力し，それぞれ末尾には改行文字`\n`を付けること．

## 実行例

`#`は標準入力，`>`は標準出力を表す．

```
# 3
> 3
> 10
> 5
> 16
> 8
> 4
> 2
> 1
> OK
```

```
# 10
> 10
> 5
> 16
> 8
> 4
> 2
> 1
> OK
```

```
# 27
> 27
> 82
> 41
> 124
... (途中省略) ...
> 70
> 35
> 106
```

## ヒント

### `for`文や`while`文による繰り返し処理，`continue`文，`break`文

- 繰り返し処理には`for`文や`while`文が用いられる．
- また，「次の繰り返しに移動」「繰り返し自体をやめる」の命令のために`continue`文と`break`文が用意されている．
- （余談）`for`，`while`，`continue`，`break`も，他の多くの言語で似ている構文が用意されている．
- 林：9.3 `while`文，9.4 `for`文，9.5`do`-`while`文，9.7 `break`文，9.8 `continue`文
- 倉：3-3 繰り返し処理1--`for`文，3-4 繰り返し処理2--`while`文
- 高橋：Lesson 6 何度も繰り返す

## 余談

コラッツの問題は[コンピュータを用いたシミュレーション](http://sweet.ua.pt/tos/3x_plus_1.html)により，$20 \times 2^{58}$（$\approx 5.76 \times 10^{18}$）までの値に対しては最終的に$1$に到達することが確認されている．

プログラムを確実に停止させるため，反復は100回までという制限を設けた．この制限を緩和もしくは撤廃すれば，（このプログラムが対応できる範囲の）どんな自然数を入力しても，有限回の操作で1に到達することを自分の目で確認できるであろう．

## 参考文献

+ 浦田敏夫. [コラッツの問題](http://www.auemath.aichi-edu.ac.jp/publish/booklet/01/collatz_problem.pdf). 愛知教育大学ブックレット 数学／数理科学セレクトⅠ, 2002年.
