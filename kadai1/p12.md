---
layout: page
title: 1-2. コラッツの問題
---

任意の自然数に対して「その数が偶数なら2で割り，奇数なら3倍して1加える」という操作を繰り返すと，最後は$1$に到達することが経験的に知られている．
今のところ反例は見つかっていないが，数学的な証明は為されておらず，[コラッツの問題](https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%A9%E3%83%83%E3%83%84%E3%81%AE%E5%95%8F%E9%A1%8C)，角谷の問題，3n+1問題などと呼ばれる未解決問題のひとつである．
ここでは実際に自然数を受け取り，$1$になる様子を（あるいはなかなか$1$に近づかない様子を）確認するためのプログラムを作成しよう．

## 問題
標準入力から自然数（正の整数）を読み込み，その値を$x_1$とする．次に，以下の漸化式で定義される操作，すなわち「その数が偶数なら2で割り，奇数なら3倍して1加える」を繰り返し，数が$1$になったら反復を終了するプログラムを作成せよ．

$$
x_{i+1} = \begin{cases}
    x_{i} / 2 & \text{（$x_i$が偶数のとき）} \\
    3x_{i} + 1 & \text{（$x_i$が奇数のとき）}
    \end{cases}
$$

ただし，入力される自然数$x_1$は$2 \leq x_1 \leq 100000$を満たすと仮定してよい．
プログラムは以下の仕様を満たすこと．

1. $x_i$（$i = 1, 2, ...$）の値を1行ずつ表示せよ．入力された値を表示し忘れないように留意せよ．
1. $x_i = 1$になった時は，その計算結果`1`を表示したのち，`OK`と表示してプログラムを終了せよ．
1. $x_{100}$まで計算しても値が$1$にならない場合は，$x_{100}$の値を表示したのち，そのままプログラムを終了せよ．このときは`OK`と表示しないこと．
1. 各表示は標準出力から出力し，末尾には改行文字`\n`を付けること．

## 実行例
`#`は標準入力，`>`は標準出力を表す．

```
# 3
> 3
> 10
> 5
> 16
> 8
> 4
> 2
> 1
> OK
```

```
# 10
> 10
> 5
> 16
> 8
> 4
> 2
> 1
> OK
```

```
# 27
> 27
> 82
> 41
> 124
... (途中省略) ...
> 70
> 35
> 106
```

## 実装のポイント
+ 繰り返し処理（`for`文や`break`文）
+ 算術演算子

## 余談
コラッツの問題は[コンピュータを用いたシミュレーション](http://sweet.ua.pt/tos/3x_plus_1.html)により，$20 \times 2^{58}$（$\approx 5.76 \times 10^{18}$）までの値に対しては最終的に$1$に到達することが確認されている．

プログラムを確実に停止させるため，反復は100回までという制限を設けた．この制限を緩和もしくは撤廃すれば，（このプログラムが対応できる範囲の）どんな自然数を入力しても，有限回の操作で1に到達することを自分の目で確認できるであろう．

## 参考文献
+ 浦田敏夫. [コラッツの問題](http://www.auemath.aichi-edu.ac.jp/publish/booklet/01/collatz_problem.pdf). 愛知教育大学ブックレット 数学／数理科学セレクトⅠ, 2002年.
