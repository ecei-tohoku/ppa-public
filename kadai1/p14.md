---
layout: page
title: 1-4. 単純移動平均
---

$T$個の観測値からなる時系列データ$x_1, x_2, ..., x_T$がある．
この時系列データの傾向を調べるために，[単純移動平均 (SMA: Simple Moving Average)](https://ja.wikipedia.org/wiki/%E7%A7%BB%E5%8B%95%E5%B9%B3%E5%9D%87)を求めたい．日付$t$における，$N$日の単純移動平均は次式で定義される．

$$
{\rm SMA}^{(N)}_t = \frac{x_t + x_{t-1} + ... + x_{t-N+1}}{N}
$$

標準入力から$1,245$個の観測値からなる時系列データ$x_1, x_2, ..., x_{1245}$が与えられる．
5日単純移動平均，20日単純移動平均を計算し，$t$, $x_t$, ${\rm SMA}^{(5)}_t$, ${\rm SMA}^{(20)}_t$をスペース区切りで標準出力に書き出せ．
ただし，以下の仕様を満たすこと．

1. 観測値は実数値である
2. 観測値は1行1観測値の形式で，$t=1$から$t=1,245$まで順に与えられる
3. 日付$t=20, 21, ..., 1245$に対し，$t$, $x_t$, ${\rm SMA}^{(5)}_t$, ${\rm SMA}^{(20)}_t$を小数点以下2桁まで，スペース区切りで1行で出力せよ

さらに，[米ドルの為替レートのデータ](usdjpy.txt)に対して作ったプログラムを適用し，横軸を$t$として，$x_t$, ${\rm SMA}^{(5)}_t$, ${\rm SMA}^{(20)}_t$をプロットし，レポートに含めよ．
なお，グラフのプロットには[gnuplot](http://www.gnuplot.info/)を使うとよい．

## 実行例
`#`は標準入力，`>`は標準出力を表す．

```
# 83.78
# 82.9
# 82.61
# 83.62
# 83.98
# 83.82
# 83.95
# 83.56
# 83.87
# 84.25
# 84.06
# 84.09
# 83.74
# 83.83
# 83.19
# 82.97
# 82.72
# 82.33
# 81.44
# 81.8
# 82.04
# 83.38
# 83.36
# 82.9
# 83.32
# 83.12
# 82.81
# 82.93
# 82.77
# 82.6
# 82.17
# 83.05
# 82.72
# 82.63
# 82.24
# 82
# 82.77
# (以下，標準入力データを省略)
> 20 81.80 82.25 83.33
> 21 82.04 82.07 83.24
> 22 83.38 82.20 83.26
> 23 83.36 82.40 83.30
> 24 82.90 82.70 83.26
> 25 83.32 83.00 83.23
> 26 83.12 83.22 83.20
> 27 82.81 83.10 83.14
> 28 82.93 83.02 83.11
> 29 82.77 82.99 83.05
> 30 82.60 82.85 82.97
> 31 82.17 82.66 82.88
> 32 83.05 82.70 82.82
> 33 82.72 82.66 82.77
> 34 82.63 82.63 82.71
> 35 82.24 82.56 82.66
> 36 82.00 82.53 82.62
> 37 82.77 82.47 82.62
> 38 82.11 82.35 82.61
> 39 82.04 82.23 82.64
> 40 81.47 82.08 82.62
> 41 81.63 82.00 82.60
> 42 81.67 81.78 82.52
> 43 82.28 81.82 82.46
> 44 82.31 81.87 82.43
> 45 82.31 82.04 82.38
> 46 82.49 82.21 82.35
> 47 83.26 82.53 82.37
> 48 83.32 82.74 82.39
> 49 83.73 83.02 82.44
> 50 83.63 83.29 82.49
> 51 83.37 83.46 82.55
> 52 83.10 83.43 82.55
> 53 82.95 83.36 82.57
> 54 82.87 83.18 82.58
> 55 82.31 82.92 82.58
> 56 81.94 82.63 82.58
> （以下，標準出力のデータを省略）
```

## 謝辞

この演習で使用するデータとして，みずほ銀行が提供している[外国為替公示相場ヒストリカルデータ](http://www.mizuhobank.co.jp/rate/market/historical.html)を用いた．