---
layout: page
title: 1-4. 単純移動平均
---

$T$個の観測値からなる時系列データ$x_1, x_2, ..., x_T$がある．
この時系列データの傾向を調べるために，[単純移動平均 (SMA: Simple Moving Average)](https://ja.wikipedia.org/wiki/%E7%A7%BB%E5%8B%95%E5%B9%B3%E5%9D%87)を求めたい．日付$t$における，$N$日の単純移動平均は次式で定義される．

$$
{\rm SMA}^{(N)}_t = \frac{x_t + x_{t-1} + ... + x_{t-N+1}}{N}
$$

標準入力から$1,000$個の観測値からなる時系列データ$x_1, x_2, ..., x_{1000}$が与えられる．
5日単純移動平均，20日単純移動平均を計算し，$t$, $x_t$, ${\rm SMA}^{(5)}_t$, ${\rm SMA}^{(20)}_t$をスペース区切りで標準出力に書き出せ．
ただし，以下の仕様を満たすこと．

1. 観測値は実数値で，1行1観測値の形式で与えられる
2. 各日付$t=20, 21, ..., 1000$に対し，$t$, $x_t$, ${\rm SMA}^{(5)}_t$, ${\rm SMA}^{(20)}_t$をスペース区切りで1行で出力せよ

さらに，[gnuplot](http://www.gnuplot.info/)を用い，横軸を$t$として，$x_t$, ${\rm SMA}^{(5)}_t$, ${\rm SMA}^{(20)}_t$をプロットし，レポートに含めよ．

## 実行例
`#`は標準入力，`>`は標準出力を表す．

```
# 49927398716
> true
```

```
# 49927398714
> false
```

```
# 1982049058395830128494
> true
```

## 実装のポイント

入力されるカード番号の桁数は最大で100桁なので，整数型（例えば`unsigned long long`型）ではカード番号を正しく保持できない恐れがある．
また，整数型でカード番号を読み取ってしまうと，各桁の数字を取り出す処理が煩雑になる（10で割ったり，10で割った余りを求める処理を繰り返すことになる）．
そこで，カード番号を文字（数字）の配列，すなわち文字列として読み込むことを考える．

+ 文字列（文字の配列）
+ ASCIIコード

## 謝辞

この演習で使用するデータとして，みずほ銀行が提供している[外国為替公示相場ヒストリカルデータ](http://www.mizuhobank.co.jp/rate/market/historical.html)を用いた．