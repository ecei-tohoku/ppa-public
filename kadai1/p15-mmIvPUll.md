---
layout: page
title: 1-5. 三目並べ【発展】
---

[三目並べ（oxゲーム）](https://ja.wikipedia.org/wiki/%E4%B8%89%E7%9B%AE%E4%B8%A6%E3%81%B9)をシミュレーションするプログラムを作成しよう．

---
## 問題
---

以下の処理を行うプログラムを実装せよ．

1. 盤面を表示する．
2. 標準入力から「o」（英小文字の「オー」）もしくは「x」（英小文字の「エックス」）を置く場所（を表す数字）を読み込む．
3. 「o」もしくは「x」どちらがどこに置こうとしているかを表示する．
4. 勝利および引き分け判定を行い，どちらかに当てはまる場合は引き分けた盤面を表示し，その旨を表示してプログラムを終了する．
5. 当てはまらない場合は，1に戻る．

盤面の初期状態は次の通りに表示する．

```
7|8|9
-+-+-
4|5|6
-+-+-
1|2|3
```

盤上に「o」もしくは「x」を置くと，その場所が数字ではなく`o`もしくは`x`に置き換わる．例えば，5番（中央）に「o」，1番（左下）に「x」を置いた時の盤面は次のように表示する．

```
7|8|9
-+-+-
4|o|6
-+-+-
x|2|3
```

先手は「o」，後手は「x」とする．置こうとしている場所の表示は，先手なら`o> 5`，後手なら`x> 1`のようにする．
この時，以下の仕様を満たすようにせよ．

+ 入力は整数のみ（数字以外の文字は入力されない）と仮定してよい．
+ 1から9以外の数値（$0,10,451$など）が入力された場合，及びすでに「o」「x」が置かれている場所が指定された場合は，`ERROR`と表示し，1から9までの数値が入力されるまで置こうとしている場所の表示を繰り返す．それぞれの表示に対して，改行文字も出力すること．
+ 勝負が決した場合，もしくは引き分けになった場合は，その盤面を表示する．
+ 続けて，先手が勝利した場合は`o win!`，後手が勝利した場合は`x win!`，引き分けの場合は`even.`と表示する．その後，改行文字も出力すること．

## 実行例

```
# 10
# 5
# 5
# 9
# 4
# 6
# 3
# 7
# 8
# 2
# 1

> 7|8|9
> -+-+-
> 4|5|6
> -+-+-
> 1|2|3
> o> 10
> ERROR
> o> 5
> 7|8|9
> -+-+-
> 4|o|6
> -+-+-
> 1|2|3
> x> 5
> ERROR
> x> 9
> 7|8|x
> -+-+-
> 4|o|6
> -+-+-
> 1|2|3
> o> 4
> 7|8|x
> -+-+-
> o|o|6
> -+-+-
> 1|2|3
> x> 6
> 7|8|x
> -+-+-
> o|o|x
> -+-+-
> 1|2|3
> o> 3
> 7|8|x
> -+-+-
> o|o|x
> -+-+-
> 1|2|o
> x> 7
> x|8|x
> -+-+-
> o|o|x
> -+-+-
> 1|2|o
> o> 8
> x|o|x
> -+-+-
> o|o|x
> -+-+-
> 1|2|o
> x> 2
> x|o|x
> -+-+-
> o|o|x
> -+-+-
> 1|x|o
> o> 1
> x|o|x
> -+-+-
> o|o|x
> -+-+-
> o|x|o
> even.
```

```
#7
#3
#8
#2
#9

> 7|8|9
> -+-+-
> 4|5|6
> -+-+-
> 1|2|3
> o> 7
> o|8|9
> -+-+-
> 4|5|6
> -+-+-
> 1|2|3
> x> 3
> o|8|9
> -+-+-
> 4|5|6
> -+-+-
> 1|2|x
> o> 8
> o|o|9
> -+-+-
> 4|5|6
> -+-+-
> 1|2|x
> x> 2
> o|o|9
> -+-+-
> 4|5|6
> -+-+-
> 1|x|x
> o> 9
> o|o|o
> -+-+-
> 4|5|6
> -+-+-
> 1|x|x
> o win!
```

## ヒント

- 「1」は左下にある．並び順に注意せよ．
- この問題でも，ひとつひとつは単純な機構を組み合わせて少し大きなプログラムを作る．
p1-4同様，小さなサブ問題を自分で設定し，これを満たすプログラムを少しずつ積み重ねていこう．
