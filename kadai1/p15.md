---
layout: page
title: 1-5. Luhnアルゴリズム
---

クレジットカード番号に誤りがないか確認するため，[Luhnアルゴリズム](https://ja.wikipedia.org/wiki/Luhn%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0)が用いられている．このアルゴリズムは，入力された番号が「正しい」か「間違っている」かを，以下の手順で求める．

1. 右端から数えて偶数番目の数字をすべて2倍する
2. 1.の計算の後，すべての数字の総和を求める．ただし，1.の処理で数字が2桁になった場合は，1桁目と2桁目の数字を足す．
3. 求めた総和の1の位が0であれば「正しい」，そうでなければ「間違っている」と判定する

例えば，49927398716という番号が入力されたとき，

![Luhnアルゴリズムの動作例](luhn.png)

より$70$が求まるため，このカード番号は「正しい」と判定される．

## 問題

標準入力より100桁までのカード番号を読み取り，
Luhnアルゴリズムで正当性を検証し，
正しければ`true`，間違っていれば`false`と標準出力に書き出すプログラムを作成せよ．
各表示の末尾には改行文字`\n`を付けること．

ただし，入力されるカード番号は$0$から$9$までの数字のみからなり，$1$文字以上$100$文字以下であると仮定してよい．

## 実行例

`#`は標準入力，`>`は標準出力を表す．

```
# 49927398716
> true
```

```
# 49927398714
> false
```

```
# 1982049058395830128494
> true
```

## ヒント

### カード番号を格納するデータ型を文字列にする

- 入力されるカード番号の桁数は最大で100桁なので，整数型（例えば`unsigned long long`型）ではカード番号を正しく保持できない恐れがある．また，整数型でカード番号を読み取ってしまうと，各桁の数字を取り出す処理が煩雑になる（10で割ったり，10で割った余りを求める処理を繰り返すことになる）．
- カード番号を（数字を表す）文字の配列，すなわち文字列として読み込むと取り扱いが楽になる．

### 文字列（文字の配列）

- C言語には文字列を格納するための型が **無い**．代わりに文字（`char`型）の **配列** として文字列を表現する．
    - 倉：1巻 4-3 文字列--基礎編，4-4 文字列--応用編
    - 高橋：7.6 文字列と配列
- `scanf`で文字列型の変数（文字の配列を指す変数）に値を読み込みたい場合，変換指定子が`"%s"`となること，また，変数をポインタにする必要がない（`&`をつけなくて良い）ことに注意．
    - （より深く知りたい人へ）`int x[10]`のように配列変数`x`を宣言し，`x`を関数に渡すと，関数には配列`x`の最初の要素へのポインタ，すなわち`&x[0]`が渡される．（`int*`型の値が渡る）
- 文字列を扱うための便利な関数は，`string.h`を（`stdio.h`と同様の方法で）読み込めば使えるようになる．

### ASCIIコード

- 文字として読み込んだ`'3'`と数字の`3`は異なることに注意．（`(int)'3'`と型キャストしても`3`にはならない！）
- ASCII（アスキーと読む）の範囲の文字（英数字やキーボードに打刻されている記号類など，たとえば`'a'`，`'3'`，`']'`など）は，計算機の内部では，その文字を表す整数で格納されている．たとえば`'a'`は計算機の内部では`97`である．対応表は **ASCIIコード**，**文字コード** などの用語で調べることができる．
    - 林：表表紙見返し 文字コード表
    - （より深く知りたい人へ）整数`97`を`printf`で文字型（`"%c"`）として出力すれば`'a'`が表示されることが分かるだろう．`char`型は`int`型の仲間である．
    - （より深く知りたい人へ）日本語ではASCIIの範囲外の文字（ひらがな，漢字など）を多く用いるため，日本語文を計算機に取り扱わせる際はASCIIよりも表現力の高い文字コードが必要となる．たとえば Shift JIS や UTF-8 はそうした表現力の高い文字コード（「文字」と「それを計算機の内部でどう表現するか」の対応表）である．
- 文字の`'3'`を数字の`3`にするためには`'3' - '0'`のように**`'0'`を引けば良い**．
    - （より深く知りたい人へ）理由をASCIIコード表を見ながら考えてみよう．`'0'`から`'9'`までが順番に並んでいることがミソである．
