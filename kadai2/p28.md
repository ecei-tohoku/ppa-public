---
layout: page
title: 2-8. 行列データのソート【10点，発展問題】
---

## 問題
リダイレクション `<` を用いて標準入力の入力元をデータファイルに切り替えることで配列データを読み込み，読み込まれた $N$ 行 $M$ 列の行列データの<font color="red">指定された行（あるいは列）が昇順あるいは降順になるように列（あるいは行）をソートさせる</font>プログラムを作成せよ．ただし，以下の仕様を満たすこと．

- データファイル　`matrix.txt` の内容は，以下の通りである．
  - データファイルの 1 行目には，データの順序を決める行番号あるいは列番号 $i$ ，行 (1) か列 (2) か，昇順 (1) か降順 (2) か，が半角スペース区切りで記載されている．たとえば，`2 1 1` の場合は，データの 2 行目 (1) が昇順 (1) になるように列をソートすることを意味する．
  - データファイルの 2 行目には，ソートすべき行列データの行数 $N$ と列数 $M$ が記載されている．はじめの数字が $N$ の値であり，次の数字が $M$ の値である．なお，行数 $N$ も列数 $M$ も 2 のべき乗となっている．
  - データファイルの 3 行目以降に，行列の各要素の値が記載されている．なお，各行の要素は半角スペースで区切られている．
  - 行列の各要素は整数である．
- `main` 関数内で，データファイル `matrix.txt` を読み込む．
  - 行列データを読み込む際に，データの格納に必要なメモリ領域を `malloc` 関数を用いて動的に確保すること．ただし，「行列データを，$N \times M$ の要素数をもつ 1 次元配列として扱う」という考え方に基づいた動的確保の方法は仕様違反とする．また，確保したメモリ領域については，すべての処理が完了した後に解放すること．
- 選択ソート，あるいは，マージソートを用いて，入力された行列データの $i$ 行目あるいは $i$ 列目が昇順あるいは降順になるように行列全体をソートする `matrixsort` 関数を作成する．
  - ソート後のデータを `matrixsort` 関数内で表示してはいけない．
  - グローバル変数および静的変数を使用してはいけない．
- ソート後の行列データを `main` 関数内で標準出力に書き出し，プログラムを終了する．
  - ソート後の行列データを表示する際には，配列の各要素を半角スペースで区切り，かつ，行毎に改行して表示すること．

## 実行例
入力ファイル ([matrix.txt](./matrix.txt)) の例

```
2 1 2
4 4
5 1 2 6
12 7 9 3
8 7 15 11
2 1 9 4
```

リダイレクション `<` を用いて `matrix.txt` の内容を標準入力から読み込む．

```
$ ./a.out < matrix.txt
```

`matrix.txt` に対する実行結果の例（`>` は標準出力，`⊔` は半角スペースを示す）

```
> 5⊔2⊔1⊔6
> 12⊔9⊔7⊔3
> 8⊔15⊔7⊔11
> 2⊔9⊔1⊔4
```
