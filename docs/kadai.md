---
layout: page
title: 課題の進め方
---

# はじめに

標準的には，以下の手順で課題を進めることになります．

1. プログラムを入力・編集する．
2. プログラムをコンパイルする．
3. プログラムを実行する．実行結果が正しければ手順6に進む．
4. プログラムをデバッグしてプログラムがうまく動かない原因を特定する．その後，手順1に戻る．
5. プログラムを[自動採点システム](https://130.34.192.88/)に提出する．テストに失敗した場合は，実行結果から失敗原因を探り，手順1もしくは手順3に戻る．
6. レポートを印刷する

これらの手順を，以下の課題を解きながら進めてみましょう．

> 2つの整数を標準入力から読み取り，その和を標準出力に書き出すプログラムを作成せよ

# ソースコードの入力

演習室の環境では，[Emacs](https://www.gnu.org/software/emacs/)，[Vim](http://www.vim.org/)，[gedit](https://wiki.gnome.org/Apps/Gedit)，[nano](http://www.nano-editor.org/)などのエディタを使い，ソースコードを入力します．
どのエディタを使っても構いませんが，後で説明するデバッグではEmacsを使うことを想定していますので，この演習では**Emacsを推奨**します．

まず，Emacsでsum.cというプログラムを作成するため，ターミナルから以下のコマンドを入力します．
ここではプログラムの名前をsum.cとしましたが，どのような名前をつけても構いません．
末尾の`&`は，emacsをバックグラウンドで実行することで，emacsとターミナルの両方を同時に使えるようにするためのものです．

```
$ emacs hello.c &
```

以下のプログラムを入力します．
実際の課題ではプログラムを自分で設計・実装することになります．

```
#include <stdio.h>

int main()
{
  int a, b;
  scanf("%d %d", &a, &b);
  printf("%d\n", a+b);
  return 0;
}
```

入力したソースコードを保存するために，ツールバーのアイコンをクリックするか，`[Ctrl]+[x] [Ctrl]+[s]` キーを押します．
Emacsの操作方法は[Emacs Cheat Sheet](http://www.programming-knowledge.com/images/archive/b/b7/20130114094201!Emacs_Cheat_Sheet.pdf)を参照するとよいと思います．

# コンパイル

作成したプログラム（sum.c）をコンパイルします．
C言語のソースコードがコンピュータが実行できる形式（機械語）に翻訳され，実行ファイル`a.out`が作成されます．

```
$ gcc -Wall sum.c
```

なお，`-Wall`はコンパイルエラーにはならないものの，ソースコードに問題がありそうな場合に警告を表示するためのオプションです．
予期せぬバグを防止するため，**このオプションは必ず付けてください**（後述）．

# プログラムの実行

sum.cから作成されたa.outを実行するには，以下のコマンドを入力します．

```
$ ./a.out
```

`scanf`関数により，標準入力（キーボード）からの入力待ちの状態になりますので，２つの整数を入力します．
実行例を以下に示します．

```
$ ./a.out
3                       <- 入力して[Enter]キーを押す
4                       <- 入力して[Enter]キーを押す
7                       <- 和が出力される
```

ちなみに，`scanf`関数の仕様により，空白文字で数字を区切って入力することも可能です．

```
$ ./a.out
3 5                     <- スペース区切りで整数を入力して[Enter]キーを押す
8                       <- 和が出力される
```

実際に課題に取り組むときは，問題のページに書かれている実行例を入力し，期待通りの出力が得られることを確認してください．
また，プログラムが無限ループに陥って暴走したり，入力待ちから抜けるために強制終了したいときがあります．
**強制終了するには，`[Ctrl]+[c]`を押してください**．

# プログラムのデバッグ

上の例では，プログラムが正しく動作したので，デバッグは不要です．
ここでは，以下のような間違ったプログラムを入力してしまった場合について説明します．
このプログラムでは，`scanf`関数の引数の変数に`&`を付けるのを忘れています（最初のうちはよく間違えるミスです）．

```
#include <stdio.h>

int main()
{
  int a, b;
  scanf("%d %d", a, b);
  printf("%d\n", a+b);
  return 0;
}
```

驚くことに，`-Wall`オプションを付けずにコンパイルすると，何のエラーも出ずにコンパイルが成功してしまいます．

```
$ gcc sum.c
```

実行すると，次のようにSegmentation Fault（セグメントエラー）が発生します．

```
$ ./a.out
2 3
セグメントエラー
```

プログラムのどこでセグメントエラーが発生したのか調べるには，デバッガを使います．
デバッガの使い方は，こちらの資料にまとめられていますので，各自で確認してください．

なお，先ほどのプログラムは，`-Wall`付きでコンパイルすると警告が表示されます．

```
$ gcc -Wall sum.c
sum.c: In function ‘main’:
sum.c:6: 警告: format ‘%d’ expects type ‘int *’, but argument 2 has type ‘int’
sum.c:6: 警告: format ‘%d’ expects type ‘int *’, but argument 3 has type ‘int’
sum.c:6: 警告: ‘a’ is used uninitialized in this function
sum.c:6: 警告: ‘b’ is used uninitialized in this function
```

このエラーメッセージの意味が理解できなくても，sum.cの6行目に問題がありそうなことは分かると思います．
一般に，セグメントエラーのデバッグは少し手間がかかりますので，`-Wall`を付けておくだけでプログラムの開発効率がかなり向上することが分かると思います．

# 自動採点システムへの投稿

プログラムの動作確認・デバッグが完了したら，自動採点システムに投稿します．


# 演習室以外で課題を進めるには
